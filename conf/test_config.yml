broker-host: localhost
broker-port: 1883
mapping-type: topic-pair
publish-topic: cs/josev
subscribe-topic: josev/cs
to-mqtt:
  timeout-ms: 500
  request-template:
    id: ${uuid()}
    name: ${verb}
    type: request
    data: ${data}
  response-extraction:
    filter:
      path: .type
      value: response
    data-path: .data
  event-config:
    registrations:
      # verbs to call to subscribe to events
      - api: josev
        verb: test_event
        args:
          action: subscribe
        event: mytest
    template:
      id: ${uuid()}
      name: ${event_name}
      type: update
      data: ${data}

from-mqtt:
  # the AFB API to call
  api: test
  request-extraction:
    verb-path: .name
    data-path: .data
    filter:
      path: .type
      value: request
  response-template:
    id: ${request.id}
    name: ${verb}
    type: response
    data: ${data}

  # this will call a verb, but won't generate a response
  event-extraction:
    verb-path: .name
    data-path: .data
    filter:
      path: .type
      value: update

